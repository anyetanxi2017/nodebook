安全可以说是公司的红线，一般项目都会有严格的认证和授权操作，在Java开发领域常见的安全框架有 `Shiro`和`Spring Security` 。

`Shiro`是一个轻量级的安全管理框架，提供了认证、授权、会话管理、密码管理、缓存管理等功能；


`Spring Security`是一个相对复杂的安全管理框架，功能比`Shiro`更加强大，权限控制细粒度更高，对`OAuth2`的支持也更好。又因为`Spring Security`源自`Spring`家庭，因此可以和`Spring`框架无疑整合，特别是`Spring Boot`中提供的自动化配置方案，可以让`Spring Security`的使用更加便捷。


## OAuth2
### 简介
OAuth 是一个开放标准，该标允许用户让第三方应用访问该用户在某一网站上存储的私密资源（如，头像、照片、视频等），而在这个过程上无须将用户名和密码提供给第三方应用。实现这个功能是通过提供一个令牌（token）。每一个令牌授权一个特定的网站在特定的时间内访问特定的资源。

采用令牌的方式可以让用户灵活地对第三方应用进行授权或者收回。

传统的Web开发登录认证一般都是基于基于Session的，但是在前台端分享的架构中使用Session会有许多不便，因为移动端有些不支持Cookie（微信小程序），对于这些问题使用OAuth2认证都能解决。
### 角色
要了解OAuth2，需要先了解OAuth2中几个基本的角色。
- 资源所有者： 资料所有者即用户、具有头像、照片、视频等资源
- 客户端： 客户端即第三方应用
- 授权服务器：授权服务器来用验证用户提供的信息是否正确，并返回一个令牌给第三方应用。
- 资源服务器：资源服务器是提供给用户资源的服务器。

一般来说，授权服务器和资源服务器可以是同一台服务器。

### 授权流程
1. 客户端向授权服务器发送请求；
2. 授权服务器判断客户端信息是否正确，是则返回一个授权许可凭证（token）；
3. 客户端获取凭证去资源服务器访问资源；
4. 资源服务器判断凭证无误后开发资源。

## 授权模式
OAuth 协议的授权模式共分为3种。
1. 授权码模式：（authorization code）是功能最完事、流程最严谨的授权模式。它的特点就是通过客户端服务器与授权服务器进行交互。国内常见的第三方平台登录功能基本都是使用这种模式。
2. 简化模式：这种模式不需要客户端服务器参与，直接在浏览器中向授权服务器申请令牌，一般若网站是纯静态页面，则可采用这种模式。
3. 密码模式：这种模式是用户把用户名和密码直接告诉客户端，客户端使用这些令牌向授权服务器申请授权。这需要用户对客户的高度信任，例如客户端应用和服务提供商是一家公司。

## Spring Security:OAuth2结合JWT使用
JWT是JSON WEB TOKEN的缩写，它是基于RFC 7519 标准定义的一种可以安全传输的JSON对象，由于使用了数字签名，所以是可信任和安全的。

OAuth2中存储令牌的方式可以使用JWT也可以使用Redis，下面我们使用JWT方式进行


