在处理关系型数据的时候,Java有多种可靠方案,其中 最常见的是JDBC和JPA。Spring同时支持这两种抽象形式，能够让JDBC或JPA的使用更加容易。

Spring对JDBC的支持要归功于JdbcTemplate类。该类提供了一种特殊方式，通过这种方式，
开发人员在对关系型数据库执行SQL操作时能避免使用JDBC时常见的繁文缛节和样板式代码。

## Step1 依赖依赖
```
<dependency>
    <groupId>com.alibaba</groupId>
    <artifactId>druid-spring-boot-starter</artifactId>
    <version>1.1.10</version>
</dependency>
<!--Mysql -->
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <scope>runtime</scope>
</dependency>        
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-jdbc</artifactId>
    <version>2.3.0.RELEASE</version>
</dependency>
<dependency>
    <groupId>javax.validation</groupId>
    <artifactId>validation-api</artifactId>
    <version>2.0.1.Final</version>
</dependency>
<dependency>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
    <optional>true</optional>
</dependency>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-web</artifactId>
</dependency>
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-devtools</artifactId>
    <scope>runtime</scope>
    <optional>true</optional>
</dependency>
```
## Step2 配置数据源
```
spring.datasource.type=com.alibaba.druid.pool.DruidDataSource
spring.datasource.druid.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.druid.url=jdbc:mysql://localhost:3306/test?useUnicode=true&characterEncoding=utf-8&serverTimezone=Asia/Shanghai&useSSL=false
spring.datasource.druid.username=root
spring.datasource.druid.password=123456
spring.datasource.druid.initial-size=5
spring.datasource.druid.min-idle=5
spring.datasource.druid.max-active=20
spring.datasource.druid.max-wait=30000
spring.datasource.druid.time-between-connect-error-millis=60000
spring.datasource.druid.min-evictable-idle-time-millis=300000
spring.datasource.druid.validation-query=select '1' from dual
spring.datasource.druid.test-while-idle=true
spring.datasource.druid.test-on-borrow=false
spring.datasource.druid.test-on-return=false
spring.datasource.druid.pool-prepared-statements=true
spring.datasource.druid.max-open-prepared-statements=20
spring.datasource.druid.max-pool-prepared-statement-per-connection-size=20
spring.datasource.druid.filters=stat,wall
#spring.datasource.druid.aop-patterns=com.rita.mychat.server.*
spring.datasource.druid.web-stat-filter.enabled=true
spring.datasource.druid.web-stat-filter.url-pattern=/*
spring.datasource.druid.web-stat-filter.exclusions='*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*'
spring.datasource.druid.stat-view-servlet.enabled=true
spring.datasource.druid.stat-view-servlet.url-pattern=/druid/*
spring.datasource.druid.stat-view-servlet.login-username=druid
spring.datasource.druid.stat-view-servlet.login-password=druid123
spring.datasource.druid.filter.stat.log-slow-sql=true
```
## Step3 添加实体
```
@Data
@AllArgsConstructor
@NoArgsConstructor
public class User {
    private Integer id;
    private String username;
    private String password;

    public User(String name, String password) {
        this.username = name;
        this.password = password;
    }
}
```
## Step4 添加UserRepository
```
public interface UserRepository {
    List<User> findAll();

    User findOneById(Integer id);

    User save(User user);
}
```
## Step5 添加UserRepositoryImpl
```
@Repository
public class UserRepositoryImpl implements UserRepository {
    @Resource
    private  JdbcTemplate jdbc;
    @Override
    public List<User> findAll() {
        return jdbc.query("select * from user", this::mapRow);
    }
    @Override
    public User findOneById(Integer id) {
        return jdbc.queryForObject("select * from user where id = ?", this::mapRow, id);
    }

    @Override
    public User save(User user) {
        int update = jdbc.update("insert into user (username,password) values (?,?)", user.getUsername(), user.getPassword());
        return user;
    }

    public User mapRow(ResultSet resultSet, int i) throws SQLException {
        return new User(resultSet.getInt("id"), resultSet.getString("username"), resultSet.getString("password"));
    }
}
```
## Step6 添加UserController
```
@RestController
@RequestMapping("/user")
public class UserController {
    @Autowired
    private UserRepository userRepository;

    @GetMapping("/saveUser")
    public String saveUser() {
        userRepository.save(new User("yuanyuan", "123456"));
        return "ok";
    }

    @GetMapping("/list")
    public String listAll() {
        return userRepository.findAll().toString();
    }

    @GetMapping("/findById/{id}")
    public String findById(@PathVariable Integer id) {
        return userRepository.findOneById(id).toString();
    }
}
```
